# تحديث الموقع ليدعم اللغة العربية فقط

## نظرة عامة
تم تحديث موقع الأخبار ليدعم اللغة العربية فقط، مع إزالة جميع الحقول والبيانات الإنجليزية من قاعدة البيانات والخادم.

## التغييرات المطبقة

### 1. قاعدة البيانات

#### الجداول المحدثة:
- **categories**: إزالة `name`, `description` والاحتفاظ بـ `name_ar`, `description_ar`
- **posts**: إزالة `title`, `content`, `excerpt`, `meta_description`, `meta_keywords` والاحتفاظ بالحقول العربية
- **breaking_news**: إزالة `title`, `content` والاحتفاظ بـ `title_ar`, `content_ar`
- **site_settings**: إزالة `setting_value` والاحتفاظ بـ `setting_value_ar`

#### حقول جديدة مضافة:
- **categories**: `description_ar`, `color`, `sort_order`, `is_active`, `updated_at`
- **breaking_news**: `slug`, `updated_at`

### 2. الخادم (Backend)

#### الملفات المحدثة:
- `middlewares/validation.js`: تحديث مخططات التحقق لتتطلب الحقول العربية فقط
- `routes/categories_enhanced.js`: إزالة معالجة الحقول الإنجليزية
- `routes/posts_combined.js`: تحديث إنشاء وتعديل المقالات للعربية فقط
- `routes/breakingNews_enhanced.js`: تحديث الأخبار العاجلة للعربية فقط
- `routes/settings_enhanced.js`: تحديث الإعدادات للعربية فقط
- `utils/postUtils.js`: تحديث وظائف إنشاء الملفات وحساب وقت القراءة

### 3. البيانات الافتراضية
- تحديث البيانات الافتراضية في `create_tables.sql` لتكون باللغة العربية فقط
- إضافة أوصاف عربية للفئات
- تحديث إعدادات الموقع لتكون باللغة العربية

## كيفية تطبيق التحديثات

### للمشاريع الجديدة:
1. استخدم ملف `sql/create_tables.sql` المحدث لإنشاء قاعدة البيانات
2. قم بتشغيل الخادم كالمعتاد

### للمشاريع الموجودة:
1. **احتياط مهم**: قم بعمل نسخة احتياطية من قاعدة البيانات قبل التحديث
   ```bash
   mysqldump -u username -p markabadatabase > backup_before_arabic_update.sql
   ```

2. قم بتشغيل سكريبت التحديث:
   ```bash
   mysql -u username -p markabadatabase < sql/update_to_arabic_only.sql
   ```

3. تحقق من البيانات الموجودة:
   - المقالات والفئات التي لا تحتوي على محتوى عربي ستحصل على نص "بحاجة لترجمة"
   - قم بمراجعة هذه البيانات وترجمتها يدوياً

## الميزات الجديدة

### 1. دعم محسن للغة العربية
- إنشاء روابط (slugs) من النصوص العربية باستخدام التحويل الصوتي
- حساب وقت القراءة محسن للنصوص العربية (200 كلمة/دقيقة)
- ملفات HTML تدعم الاتجاه من اليمين لليسار (RTL)

### 2. تحسينات قاعدة البيانات
- إضافة فهارس للأداء المحسن
- حقول جديدة للفئات (لون، ترتيب، حالة النشاط)
- روابط للأخبار العاجلة

### 3. تحسينات الأمان
- التحقق من صحة البيانات محدث للحقول العربية
- إزالة الحقول غير المستخدمة لتقليل سطح الهجوم

## ملاحظات مهمة

1. **البيانات الموجودة**: تأكد من ترجمة أي محتوى إنجليزي موجود قبل حذف الحقول الإنجليزية

2. **الواجهة الأمامية**: قد تحتاج لتحديث الواجهة الأمامية لتتوافق مع التغييرات في API

3. **النسخ الاحتياطية**: احتفظ بنسخ احتياطية منتظمة خاصة بعد التحديث

4. **الاختبار**: اختبر جميع الوظائف بعد التحديث للتأكد من عملها بشكل صحيح

## الدعم
إذا واجهت أي مشاكل أثناء التحديث، تأكد من:
- وجود نسخة احتياطية من قاعدة البيانات
- صحة صيغة ملفات SQL
- صلاحيات قاعدة البيانات
- تحديث متغيرات البيئة إذا لزم الأمر

---

**تاريخ التحديث**: $(date)
**الإصدار**: 2.0 - Arabic Only